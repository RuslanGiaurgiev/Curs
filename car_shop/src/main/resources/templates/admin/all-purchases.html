<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–í—Å–µ –ø–æ–∫—É–ø–∫–∏ - –ê–¥–º–∏–Ω–∫–∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">CarShop</a>
        <span class="navbar-text text-warning">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
        <div class="navbar-nav ms-auto">
            <a class="nav-link" href="/cars/manage">–ê–≤—Ç–æ–º–æ–±–∏–ª–∏</a>
            <a class="nav-link" href="/admin/users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
            <a class="nav-link active" href="/admin/purchases">–ü–æ–∫—É–ø–∫–∏</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h2>üí∞ –í—Å–µ –ø–æ–∫—É–ø–∫–∏</h2>

    <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–∫—É–ø–æ–∫ -->
    <div class="table-responsive">
        <table class="table table-striped">
            <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                <th>–ê–≤—Ç–æ–º–æ–±–∏–ª—å</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–î–∞—Ç–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="purchase : ${purchases}">
                <td th:text="${purchase.id}"></td>
                <td>
                    <span th:text="${purchase.user.username}"></span>
                    <br>
                    <small class="text-muted" th:text="${purchase.user.email}"></small>
                </td>
                <td>
                    <span th:text="${purchase.car.brand + ' ' + purchase.car.model}"></span>
                    <br>
                    <small class="text-muted" th:text="${purchase.car.year} + ', ' + ${purchase.car.color}"></small>
                </td>
                <td class="text-success fw-bold" th:text="${purchase.totalPrice + ' —Ä—É–±.'}"></td>
                <td th:text="${#temporals.format(purchase.purchaseDate, 'dd.MM.yyyy HH:mm')}"></td>
                <td>
                    <span th:if="${purchase.status == 'completed'}" class="badge bg-success">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div th:if="${purchases.empty}" class="alert alert-info text-center">
        <h4>–ü–æ–∫—É–ø–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h4>
        <p>–í —Å–∏—Å—Ç–µ–º–µ –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–∫—É–ø–æ–∫</p>
    </div>
</div>
</body>
</html>